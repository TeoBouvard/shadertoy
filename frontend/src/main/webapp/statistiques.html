<!DOCTYPE html>
<html>

    <head>
        <title>Positif</title>
        <meta charset="UTF-8">

        <!-- Librairie Javascript: jQuery (v3.3.1) -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" type="text/CSS" href="client.css">
    </head>

    <body>
        <div id="bloc-page">
            <h1> Statistiques </h1><br>
            <div id="graphe-gauche">
                <h2>Voyances par médium</h2>
                <ul id="voyances-mediums"></ul>
            </div><br>

            <div id="graphe-droit">
                <h2>Clients par employés</h2>
                <ul id="clients-employes"></ul>
            </div><br>
            <button onclick="location = 'employe.html'">Retour</button>
        </div>

        <script>
            $(document).ready(GetStatistiques());

            function GetStatistiques() {
                $.ajax({
                    url: './ActionServlet', // URL
                    method: 'POST', // Méthode
                    data: {// Paramètres
                        todo: 'statistiques'
                    },
                    dataType: 'json'        // Type de retour attendu
                }).done(function (response) {
                    $.each(response.listeMedium, function (i, medium) {
                        $("#voyances-mediums").append("<li>" + medium.nom + " : " + medium.nbVoyances + " / " + response.nbVoyancesTotal + "</li>");
                    });
                    $.each(response.listeEmploye, function (i, employe) {
                        $("#clients-employes").append("<li>" + employe.nom + " " + employe.prenom + " : " + employe.nbSessions + " / " + response.nbSessionsTotal + "</li>");
                    });
                })
            }

        </script>

    </body>

</html>