<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <title>Positif</title>
    <meta charset="UTF-8">

    <!-- Librairie Javascript: jQuery (v3.3.1) -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" type="text/CSS" href="client.css">
    <!--<link rel="stylesheet" type="text/CSS" href="stylesheet.css">-->

</head>

<body>
    <div id="bloc-page">
        <div id="left-panel">
            <div id="description">
                    <label id="nom-client">Nom</label><br>
                    <label id="prenom-client">Prenom</label><br>
            </div>
            <div id="navigation">
                <button id="bouton-accueil" onclick="location.href = 'client.html';"> <b> Accueil </b> </button><br>
                <button id="bouton-profil" disabled> <b> Profil Astro </b></button><br>
                <button id="bouton-historique" onclick="location.href = 'historique.html';"> <b> Historique </b> </button>
            </div>
            <button id="bouton-deconnecter" onclick="Deconnecter()"> <b> Se déconnecter </b> </button>
        </div>

        <div id="profil">
            <h1>
                Profil Astrologique
            </h1>
            <label id="couleur"></label><br>
            <label id="zodiaque"></label><br>
            <label id="chinois"></label><br>
            <label id="animal"></label><br>
        </div>
        

    </div>

    <script>
        $(document).ready(function () {
            GetInfoClient();
        });

        function GetInfoClient() {
            $.ajax({
                url: './ActionServlet', // URL
                method: 'POST', // Méthode
                data: {// Paramètres
                    todo: 'infos-client'
                },
                dataType: 'json'        // Type de retour attendu
            }).done(function (response) {
                $('#nom-client').html(response.nom);
                $('#prenom-client').html(response.prenom);
                
                $('#couleur').html("Couleur : " + response.couleur);
                $('#zodiaque').html("Signe Zodiaque : " + response.zodiaque);
                $('#chinois').html("Signe Chinois : " + response.chinois);
                $('#animal').html("Animal : " + response.animal);
            });
        }
        
        function Deconnecter() {
            //A faire : reset de l'attribut personne et redirection vers index.html
            $.ajax({
                url: './ActionServlet', // URL
                method: 'POST', // Méthode
                data: {// Paramètres
                    todo: 'deconnecter'
                },
                dataType: 'json'        // Type de retour attendu
            }).done(function (response){
                window.location = "index.html";
            }).fail(function (error) {
                alert('Erreur lors de l\'appel: HTTP Code ' + error.status + ' ~ ' + error.statusText + ' ~ ' + error.getResponseHeader('Content-Type'));
                
            });
        }



    </script>

</body>

</html>